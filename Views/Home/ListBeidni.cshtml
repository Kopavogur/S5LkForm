@model DataTable

@{ 
    ViewData["Title"] = "Beiðnir";

    List<DataRow> rowList;
    HashSet<string> columnNames;
    if (Model.TableName == "xxxEmpty")
    {
        rowList = (from o in Model.AsEnumerable() select o).ToList();
        columnNames = new() { "Skilaboð" };
    }
    else
    {
        rowList = (
            from o in Model.AsEnumerable()
            orderby o.Field<string>("Forgangur"), o.Field<string>("Staða"), o.Field<string>("Stofnun"), o.Field<string>("Mynduð") ascending
            select o
        ).ToList();
        columnNames = new() { "Forgangur", "Staða", "Stofnun", "Heiti", "Mynduð" };
    }
}

<h3>Beiðnir</h3>

<table class="table">
    <thead>
        <tr>
            @foreach (string colName in columnNames)
            {
                DataColumn col = Model.Columns[colName];
                <th scope="col">@col.Caption</th>
            }
            <th scope="col"><span class="float-right">Aðgerðir</span></th>
        </tr>
    </thead>
    <tbody>
        @foreach (DataRow row in rowList)
        {
        <tr>
            @foreach (string colName in columnNames)
            {
                var cell = row.ItemArray[Model.Columns[colName].Ordinal];
                <td>@cell.ToString()</td>
            }
            <td>
                @if (Model.TableName != "xxxEmpty")
                {
                    <a class="float-right" asp-controller="Home" asp-action="CreateAndUpdateBeidni" asp-route-S5RequestID="@row.ItemArray[Model.Columns["Númer"].Ordinal].ToString()"><i class="fas fa-eye"></i></a>
                }
            </td>
        </tr>
        }
    </tbody>
</table>
